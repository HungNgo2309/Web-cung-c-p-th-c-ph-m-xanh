@using Food.Models
@model IList<Food.Models.CartDetail>
@{
    ViewBag.Title = "Payment";
    Layout = "~/Views/Shared/_FoodLayoutPage1.cshtml";
}
<h4 style="color:red; text-align:center;">@ViewBag.ThongBao</h4>
<section class="breadcrumb-section set-bg" data-setbg="img/breadcrumb.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>Checkout</h2>
                    <div class="breadcrumb__option">
                        <a href="./index.html">Home</a>
                        <span>Checkout</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->
<!-- Checkout Section Begin -->
<section class="checkout spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h6>
                    <span class="icon_tag_alt"></span> Have a coupon? <a href="#">Click here</a> to enter your code
                </h6>
            </div>
        </div>
        @using (Html.BeginForm("Payment", "ShoppingCart",FormMethod.Post,new {ds = Model}))
        {
            Account ac = (Account)Session["TaiKhoan"];
             @Html.AntiForgeryToken()
            <div class="checkout__form">
                <h4>Billing Details</h4>
                <form action="#">
                    <div class="row">
                        <div class="col-lg-8 col-md-6">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p>Họ và tên<span>*</span></p>
                                        <input type="text" name="name" value="@ac.UserName" >
                                    </div>
                                </div>
                                
                            </div>
                            <div class="checkout__input">
                                <p>Địa chỉ<span style="color:red;">* @ViewData["err1"]</span></p>
                                <input type="text" value="@ac.Address" name="address" >
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p>Số điện thoại<span style="color:red;">* @ViewData["err2"]</span></p>
                                        <input type="text" name="sdt" value="@ac.PhoneNumber">
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p>Email<span>*</span></p>
                                        <input type="text" name="email" value="@ac.Email">
                                    </div>
                                </div>
                            </div>
                            <div class="checkout__input">
                                <p>Account Password<span style="color:red;">* @ViewData["err3"]</span></p>
                                <input type="text" name="password">
                            </div>
                            <div class="checkout__input">
                                <p>Ghi chú<span>*</span></p>
                                <input type="text"
                                       placeholder="Notes about your order, e.g. special notes for delivery.">
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="checkout__order">
                                <h4>Đơn hàng của bạn</h4>
                                <div class="checkout__order__products">Sản phẩm <span>Giá</span></div>
                                <ul>
                                    @for (var i = 0; i < Model.Count(); i++)
                                    {

                                        @Html.HiddenFor(m => m[i].CartDetailID);
                                        @Html.HiddenFor(m => m[i].ProductID);
                                        @Html.HiddenFor(m => m[i].ShoppingCartID);
                                        FoodStoreEntities db = new FoodStoreEntities();
                                        int id = Convert.ToInt32(Model[i].ProductID);
                                        Product pd = db.Products.SingleOrDefault(n => n.ProductID == id);
                                        <li>@pd.Name<span>@Html.FormatValue(Model[i].Price * Model[i].Quantity, "{0:#,##0}")VNĐ</span></li>
                                    }
                                </ul>
                                <div class="checkout__order__subtotal">Subtotal <span>@ViewBag.TongTien</span></div>
                                <div class="checkout__order__total">Total <span>@ViewBag.TongTien</span></div>
                                <p>
                                    Chọn hình thức thanh toán
                                </p>

                                <div class="form-check">
                                    <label class="form-check-label">
                                        <input type="radio" class="form-check-input" name="pay" value="0">Thanh toán khi nhận hàng
                                    </label>
                                </div>
                                <div class="form-check">
                                    <label class="form-check-label">
                                        <input type="radio" class="form-check-input" name="pay" value="1">VNPay
                                    </label>

                                    <button type="submit" class="site-btn">PLACE ORDER</button>

                                </div>
                            </div>
                    </div>
                </form>
            </div>
        }
        </div>
</section>
<!-- Checkout Section End -->
